!function(){return function n(e,t,o){function r(s,i){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(n){return r(e[s][1][n]||n)},c,c.exports,n,e,t,o)}return t[s].exports}for(var a="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}}()({1:[function(n,e,t){"use strict";function o(n,e,t,o){var r=Number(n[e].meta.id+1).toString(),a="";return"string"==typeof o.docId&&(a="-"+o.docId+"-"),a+r}function r(n,e){var t=Number(n[e].meta.id+1).toString();return n[e].meta.subId>0&&(t+=":"+n[e].meta.subId),"["+t+"]"}function a(n,e,t,o,r){var a=r.rules.annotation_anchor_name(n,e,t,o,r),s=r.rules.annotation_caption(n,e,t,o,r),i=a;return n[e].meta.subId>0&&(i+=":"+n[e].meta.subId),`<sup class="annotation-ref">${`<a href="#an${a}" id="anref${i}"${n[e].meta.type?` class="${n[e].meta.type}"`:""}>${s}</a>`}</sup>`}function s(n,e,t){return'<section class="annotations">\n<ol class="annotation-list">\n'}function i(){return"</ol>\n</section>\n"}function u(n,e,t,o,r){var a=r.rules.annotation_anchor_name(n,e,t,o,r);return n[e].meta.subId>0&&(a+=":"+n[e].meta.subId),'<li id="an'+a+'" class="annotation-item">'}function l(){return"</li>\n"}function c(n,e,t,o,r){var a=r.rules.annotation_anchor_name(n,e,t,o,r);return n[e].meta.subId>0&&(a+=":"+n[e].meta.subId),' <a href="#anref'+a+'" class="annotation-backref">\u21a9\ufe0e</a>'}e.exports=function(n){var e=n.helpers.parseLinkLabel,t=n.utils.isSpace;n.renderer.rules.annotation_ref=a,n.renderer.rules.annotation_block_open=s,n.renderer.rules.annotation_block_close=i,n.renderer.rules.annotation_open=u,n.renderer.rules.annotation_close=l,n.renderer.rules.annotation_anchor=c,n.renderer.rules.annotation_caption=r,n.renderer.rules.annotation_anchor_name=o,n.block.ruler.before("reference","annotation_def",function(n,e,o,r){var a,s,i,u,l,c,f,p,d,h,k,v=n.bMarks[e]+n.tShift[e],b=n.eMarks[e];if(v+4>b)return!1;if(91!==n.src.charCodeAt(v))return!1;if(94!==n.src.charCodeAt(v+1))return!1;for(l=v+2;l<b;l++){if(32===n.src.charCodeAt(l))return!1;if(93===n.src.charCodeAt(l))break}if(l===v+2)return!1;if(l+1>=b||58!==n.src.charCodeAt(++l))return!1;if(r)return!0;for(l++,n.env.annotations||(n.env.annotations={}),n.env.annotations.refs||(n.env.annotations.refs={}),c=n.src.slice(v+2,l-2),n.env.annotations.refs[":"+c]=-1,(f=new n.Token("annotation_reference_open","",1)).meta={label:c},f.level=n.level++,n.tokens.push(f),a=n.bMarks[e],s=n.tShift[e],i=n.sCount[e],u=n.parentType,k=l,p=d=n.sCount[e]+l-(n.bMarks[e]+n.tShift[e]);l<b&&(h=n.src.charCodeAt(l),t(h));)9===h?d+=4-d%4:d++,l++;return n.tShift[e]=l-k,n.sCount[e]=d-p,n.bMarks[e]=k,n.blkIndent+=4,n.parentType="annotation",n.sCount[e]<n.blkIndent&&(n.sCount[e]+=n.blkIndent),n.md.block.tokenize(n,e,o,!0),n.parentType=u,n.blkIndent-=4,n.tShift[e]=s,n.sCount[e]=i,n.bMarks[e]=a,(f=new n.Token("annotation_reference_close","",-1)).level=--n.level,n.tokens.push(f),!0},{alt:["paragraph","reference"]}),n.inline.ruler.after("image","annotation_inline",function(n,t){var o,r,a,s,i=n.posMax,u=n.pos;return!(u+2>=i||94!==n.src.charCodeAt(u)||91!==n.src.charCodeAt(u+1)||(o=u+2,(r=e(n,u+1))<0||(t||(n.env.annotations||(n.env.annotations={}),n.env.annotations.list||(n.env.annotations.list=[]),a=n.env.annotations.list.length,n.md.inline.parse(n.src.slice(o,r),n.md,n.env,s=[]),n.push("annotation_ref","",0).meta={id:a},n.env.annotations.list[a]={tokens:s}),n.pos=r+1,n.posMax=i,0)))}),n.inline.ruler.after("annotation_inline","annotation_ref",function(n,e){var t,o,r,a,s,i=n.posMax,u=n.pos;if(u+3>i)return!1;if(!n.env.annotations||!n.env.annotations.refs)return!1;if(91!==n.src.charCodeAt(u))return!1;if(94!==n.src.charCodeAt(u+1))return!1;for(r=u+2;r<i;r++){if(32===n.src.charCodeAt(r))return!1;if(10===n.src.charCodeAt(r))return!1;if(93===n.src.charCodeAt(r))break}if(r===u+2)return!1;if(r>=i)return!1;r++;var l=(t=n.src.slice(u+2,r-1)).match(/^(?<label>.*):(?<type>[a-z0-9_-]*)$/i);return l&&(t=l.groups.label,o=l.groups.type),void 0!==n.env.annotations.refs[":"+t]&&(e||(n.env.annotations.list||(n.env.annotations.list=[]),n.env.annotations.refs[":"+t]<0?(a=n.env.annotations.list.length,n.env.annotations.list[a]={label:t,count:0},n.env.annotations.refs[":"+t]=a):a=n.env.annotations.refs[":"+t],s=n.env.annotations.list[a].count,n.env.annotations.list[a].count++,n.push("annotation_ref","",0).meta={id:a,subId:s,label:t,type:o}),n.pos=r,n.posMax=i,!0)}),n.core.ruler.after("inline","annotation_tail",function(n){var e,t,o,r,a,s,i,u,l,c,f=!1,p={};if(n.env.annotations&&(n.tokens=n.tokens.filter(function(n){return"annotation_reference_open"===n.type?(f=!0,l=[],c=n.meta.label,!1):"annotation_reference_close"===n.type?(f=!1,p[":"+c]=l,!1):(f&&l.push(n),!f)}),n.env.annotations.list)){for(s=n.env.annotations.list,i=new n.Token("annotation_block_open","",1),n.tokens.push(i),e=0,t=s.length;e<t;e++){for((i=new n.Token("annotation_open","",1)).meta={id:e,label:s[e].label},n.tokens.push(i),s[e].tokens?(u=[],(i=new n.Token("paragraph_open","p",1)).block=!0,u.push(i),(i=new n.Token("inline","",0)).children=s[e].tokens,i.content="",u.push(i),(i=new n.Token("paragraph_close","p",-1)).block=!0,u.push(i)):s[e].label&&(u=p[":"+s[e].label]),n.tokens=n.tokens.concat(u),a="paragraph_close"===n.tokens[n.tokens.length-1].type?n.tokens.pop():null,r=s[e].count>0?s[e].count:1,o=0;o<r;o++)(i=new n.Token("annotation_anchor","",0)).meta={id:e,subId:o,label:s[e].label},n.tokens.push(i);a&&n.tokens.push(a),i=new n.Token("annotation_close","",-1),n.tokens.push(i)}i=new n.Token("annotation_block_close","",-1),n.tokens.push(i)}})}},{}]},{},[1]);
